"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[154],{148:(e,t,i)=>{i.d(t,{Z:()=>a});var r=i(645),n=i.n(r)()((function(e){return e[1]}));n.push([e.id,".btn[data-v-7c7f5191]{margin:0 10px 10px 0}.filters[data-v-7c7f5191]{margin-bottom:20px}.form-check-input[data-v-7c7f5191],.form-label[data-v-7c7f5191]{cursor:pointer}.form-check-input[data-v-7c7f5191]{margin-right:5px}.form-label[data-v-7c7f5191]{margin-right:10px}.input_area[data-v-7c7f5191]{margin-bottom:20px}",""]);const a=n},880:(e,t,i)=>{i.d(t,{Z:()=>a});var r=i(645),n=i.n(r)()((function(e){return e[1]}));n.push([e.id,".styled-table[data-v-6fc34d2a]{border-collapse:collapse;width:100%}.styled-table td[data-v-6fc34d2a]{border-bottom:1px solid #ccc;padding:5px 10px}td.heading[data-v-6fc34d2a]{background-color:#2d499d;border-color:#2d499d;color:#fff;cursor:pointer;font-weight:700;padding:15px 10px}.heading.active[data-v-6fc34d2a]{background-color:#4c6ac7}",""]);const a=n},154:(e,t,i)=>{i.r(t),i.d(t,{default:()=>ie});var r=i(821),n={class:"card card-primary card-outline"},a={class:"card-body"};var o=i(588);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(n=r.key,a=void 0,a=function(e,t){if("object"!==l(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!==l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===l(a)?a:String(a)),r)}var n,a}const c=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,r;return t=e,i=[{key:"getList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0,a=this.url;return o.Z.get(a,{params:{count:e,page:t,sort:i,dir:r,filter:n}})}},{key:"getById",value:function(e){return o.Z.get(this.url+"/"+e,{params:{id:e}})}},{key:"get",value:function(e){return o.Z.get(e)}}],i&&s(t.prototype,i),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}());var d={class:"styled-table"},u=["data-code","data-dir","data-index","onClick"],f=["src"],p=["href"];const m={name:"Table",data:function(){return{}},methods:{filterFields:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object.keys(t).filter((function(t){return!1===e.columns.includes(t)})).forEach((function(e){return delete t[e]})),t},sortColumn:function(e,t,i){for(var r in this.headers)this.headers[r].is_sort=!1;t="desc"===t?"asc":"desc",this.headers[i].dir=t,this.headers[i].is_sort=!0,this.$emit("updateItems",1,e,t)}},props:["headers","items","columns","route_create_name","route_edit_name"],mounted:function(){}};var g=i(379),h=i.n(g),_=i(880),v={insert:"head",singleton:!1};h()(_.Z,v);_.Z.locals;var b=i(744);const y=(0,b.Z)(m,[["render",function(e,t,i,n,a,o){return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("table",d,[(0,r._)("tr",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.headers,(function(e,t){return(0,r.wg)(),(0,r.iD)("td",{class:(0,r.C_)([e.is_sort?"active":"","heading"]),"data-code":e.code,"data-dir":e.dir,"data-index":t,onClick:function(i){return o.sortColumn(e.code,e.dir,t)},key:e.title},[(0,r.Uk)((0,r.zw)(e.title)+" ",1),(0,r._)("i",{class:(0,r.C_)(["bi","asc"===e.dir?"bi-arrow-up-short":"bi-arrow-down-short"])},null,2)],10,u)})),128))]),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.items,(function(e){return(0,r.wg)(),(0,r.iD)("tr",{key:e.id},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.headers,(function(t,i){return(0,r.wg)(),(0,r.iD)("td",{key:i},["img"===t.type?((0,r.wg)(),(0,r.iD)("img",{key:0,alt:"",style:{"max-height":"90px"},src:e[t.code]},null,8,f)):"price"===t.code?((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[(0,r.Uk)((0,r.zw)(e[t.code]/100),1)],64)):"url"===t.type?((0,r.wg)(),(0,r.iD)("a",{key:2,href:e[t.url]},(0,r.zw)(e[t.code]),9,p)):"badge"===t.type?((0,r.wg)(),(0,r.iD)("span",{key:3,class:(0,r.C_)(["badge",e[t.code].class])},(0,r.zw)(e[t.code].title),3)):((0,r.wg)(),(0,r.iD)(r.HY,{key:4},[(0,r.Uk)((0,r.zw)(e[t.code]),1)],64))])})),128))])})),128))])])}],["__scopeId","data-v-6fc34d2a"]]);var w=function(e){return(0,r.dD)("data-v-7c7f5191"),e=e(),(0,r.Cn)(),e},k={class:"filters"},D={class:"row"},x={class:"col-lg-6 col-md-12"},I={class:"mb-3"},C=w((function(){return(0,r._)("label",{for:"name_filter",class:"form-label"},"Name",-1)})),P={class:"mb-3"},z=["id","value"],U=["for"],Z={class:"mb-3"},S=["id","value"],F=["for"],H={class:"col-lg-6 col-md-12"},Y={class:"mb-3"},j=w((function(){return(0,r._)("label",{for:"code_filter",class:"form-label"},"Code",-1)})),O={class:"row"},T={class:"col-lg-6 col-md-12"},V=w((function(){return(0,r._)("label",{for:"min_price_filter",class:"form-label"},"Min price",-1)})),L={class:"col-lg-6 col-md-12"},N=w((function(){return(0,r._)("label",{for:"max_price_filter",class:"form-label"},"Max price",-1)})),E={class:"input_area"},K=w((function(){return(0,r._)("label",{for:"name_filter",class:"form-label"},"Description",-1)}));const $={name:"FilterProduct",data:function(){return{filter:{},colors:{},sizes:{}}},methods:{filterOut:function(){this.$emit("filterItems",this.filter)},clearFilter:function(){this.filter={},this.$emit("filterItems",this.filter)},getItems:function(e,t,i,r){var n=this;c.url=r,c.getList(this.per_page,e,this.sort,this.dir,this.filter).then((function(e){var t;n[r]=null!==(t=e.data.data)&&void 0!==t?t:[]}))}},props:[],mounted:function(){this.getItems(1,"id","asc","colors"),this.getItems(1,"id","asc","sizes")}};var M=i(148),R={insert:"head",singleton:!1};h()(M.Z,R);M.Z.locals;const W=(0,b.Z)($,[["render",function(e,t,i,n,a,o){return(0,r.wg)(),(0,r.iD)("div",k,[(0,r._)("div",D,[(0,r._)("div",x,[(0,r._)("div",I,[C,(0,r.wy)((0,r._)("input",{class:"form-control",type:"text",id:"name_filter","onUpdate:modelValue":t[0]||(t[0]=function(e){return a.filter.name=e})},null,512),[[r.nr,a.filter.name]])]),(0,r._)("div",P,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.colors,(function(e){return(0,r.wg)(),(0,r.iD)(r.HY,{key:e.id},[(0,r.wy)((0,r._)("input",{class:"form-check-input",type:"radio",id:e.name+"_color",value:e.id,"onUpdate:modelValue":t[1]||(t[1]=function(e){return a.filter.color_id=e})},null,8,z),[[r.G2,a.filter.color_id]]),(0,r._)("label",{class:"form-label",for:e.name+"_color"},(0,r.zw)(e.name),9,U)],64)})),128))]),(0,r._)("div",Z,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.sizes,(function(e){return(0,r.wg)(),(0,r.iD)(r.HY,{key:e.id},[(0,r.wy)((0,r._)("input",{class:"form-check-input",type:"radio",id:e.name+"_size",value:e.id,"onUpdate:modelValue":t[2]||(t[2]=function(e){return a.filter.size_id=e})},null,8,S),[[r.G2,a.filter.size_id]]),(0,r._)("label",{class:"form-label",for:e.name+"_size"},(0,r.zw)(e.name),9,F)],64)})),128))])]),(0,r._)("div",H,[(0,r._)("div",Y,[j,(0,r.wy)((0,r._)("input",{class:"form-control",type:"text",id:"code_filter","onUpdate:modelValue":t[3]||(t[3]=function(e){return a.filter.code=e})},null,512),[[r.nr,a.filter.code]])]),(0,r._)("div",O,[(0,r._)("div",T,[V,(0,r.wy)((0,r._)("input",{class:"form-control",type:"number",id:"min_price_filter","onUpdate:modelValue":t[4]||(t[4]=function(e){return a.filter.min_price=e}),min:"0.00",max:"10000.00",step:"0.01"},null,512),[[r.nr,a.filter.min_price]])]),(0,r._)("div",L,[N,(0,r.wy)((0,r._)("input",{class:"form-control",type:"number",id:"max_price_filter","onUpdate:modelValue":t[5]||(t[5]=function(e){return a.filter.max_price=e}),min:"0.00",max:"10000.00",step:"0.01"},null,512),[[r.nr,a.filter.max_price]])])])])]),(0,r._)("div",E,[K,(0,r.wy)((0,r._)("input",{class:"form-control",type:"text",id:"descr_filter","onUpdate:modelValue":t[6]||(t[6]=function(e){return a.filter.descr=e})},null,512),[[r.nr,a.filter.descr]])]),(0,r._)("button",{class:"btn btn-primary",onClick:t[7]||(t[7]=function(){return o.filterOut&&o.filterOut.apply(o,arguments)})},"FILTER OUT"),(0,r._)("button",{class:"btn btn-secondary",onClick:t[8]||(t[8]=function(){return o.clearFilter&&o.clearFilter.apply(o,arguments)})},"CLEAR FILTERS")])}],["__scopeId","data-v-7c7f5191"]]);var q={class:"mt-3","aria-label":"Page navigation"},A={class:"pagination"},G={key:0,class:"page-item"},B=[(0,r._)("span",{"aria-hidden":"true"},"«",-1)],J=["onClick"],Q={key:1,class:"page-item"},X=[(0,r._)("span",{"aria-hidden":"true"},"»",-1)];const ee={props:{pagination:{type:Object},offset:{type:Number,default:4}},computed:{pagesNumber:function(){if(!this.pagination.to)return[];var e=this.pagination.current_page-this.offset;e<1&&(e=1);var t=e+2*this.offset;t>=this.pagination.last_page&&(t=this.pagination.last_page);for(var i=[],r=e;r<=t;r++)i.push(r);return i}},methods:{changePage:function(e){this.$emit("paginate",e)}}},te={data:function(){return{title:{},items:{},offset:null,headers:{},per_page:null,sort:null,dir:null,add:"",edit:"",current_page:1,filter:{}}},components:{TableAdmin:y,VuePagination:(0,b.Z)(ee,[["render",function(e,t,i,n,a,o){return(0,r.wg)(),(0,r.iD)("nav",q,[(0,r._)("ul",A,[i.pagination.current_page>1?((0,r.wg)(),(0,r.iD)("li",G,[(0,r._)("a",{class:"page-link",href:"javascript:void(0)","aria-label":"Previous",onClick:t[0]||(t[0]=(0,r.iM)((function(e){return o.changePage(i.pagination.current_page-1)}),["prevent"]))},B)])):(0,r.kq)("",!0),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.pagesNumber,(function(e){return(0,r.wg)(),(0,r.iD)("li",{class:(0,r.C_)(["page-item",{active:e==i.pagination.current_page}])},[(0,r._)("a",{class:"page-link",href:"javascript:void(0)",onClick:(0,r.iM)((function(t){return o.changePage(e)}),["prevent"])},(0,r.zw)(e),9,J)],2)})),256)),i.pagination.current_page<i.pagination.last_page?((0,r.wg)(),(0,r.iD)("li",Q,[(0,r._)("a",{class:"page-link",href:"javascript:void(0)","aria-label":"Next",onClick:t[1]||(t[1]=(0,r.iM)((function(e){return o.changePage(i.pagination.current_page+1)}),["prevent"]))},X)])):(0,r.kq)("",!0)])])}]]),FilterProduct:W},computed:{},methods:{filterItems:function(e){this.filter=e,this.getItems()},getItems:function(e,t,i){var r=this;t&&(this.sort=t),i&&(this.dir=i),c.getList(this.per_page,e,this.sort,this.dir,this.filter).then((function(t){var i;r.items=null!==(i=t.data)&&void 0!==i?i:[];var n=new URL(window.location.href);n.searchParams.delete("page"),e>1&&n.searchParams.set("page",e),window.history.replaceState(null,null,n)}))},setDefault:function(){this.title="Продукты",this.headers=[{title:"ID",code:"id",dir:"desc",is_sort:!0},{title:"Name",code:"name",dir:"asc",is_sort:!0},{title:"Code",code:"code",dir:"asc",is_sort:!0},{title:"Price",code:"price",dir:"asc",is_sort:!0},{title:"Description",code:"descr",dir:"asc",is_sort:!0},{title:"Color",code:"color_name",dir:"asc",is_sort:!0},{title:"Size",code:"size_name",dir:"asc",is_sort:!0}],this.offset=[],this.per_page=10,this.$store.dispatch("setTitle",this.title),c.url="products",this.getItems()}},mounted:function(){c.url=this.$route.params.entity,this.setDefault()}},ie=(0,b.Z)(te,[["render",function(e,t,i,o,l,s){var c,d=(0,r.up)("filter-product"),u=(0,r.up)("table-admin"),f=(0,r.up)("vue-pagination");return(0,r.wg)(),(0,r.iD)("div",n,[(0,r._)("div",a,[(0,r.Wm)(d,{onFilterItems:s.filterItems},null,8,["onFilterItems"]),(0,r.Wm)(u,{items:l.items.data,headers:l.headers,onUpdateItems:s.getItems},null,8,["items","headers","onUpdateItems"]),(0,r.Wm)(f,{pagination:null!==(c=l.items.meta)&&void 0!==c?c:{},onPaginate:s.getItems,offset:l.per_page},null,8,["pagination","onPaginate","offset"])])])}]])}}]);